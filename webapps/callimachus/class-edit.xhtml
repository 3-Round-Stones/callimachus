<?xml version="1.0" encoding="UTF-8" ?>
<?xml-stylesheet type="text/xsl" href="/callimachus/manifest?template"?>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
	xmlns:owl="http://www.w3.org/2002/07/owl#" xmlns:calli="http://callimachusproject.org/rdf/2009/framework#"
	xmlns:foaf="http://xmlns.com/foaf/0.1/">
<head>
	<title about="?this">{rdfs:label}</title>
	<script type="text/javascript">//<![CDATA[
		jQuery(function($){
			var Composite = "/callimachus/Composite";
			var subClassOf = $('#subClassOf');
			if (subClassOf.children('[about$="' + Composite + '"]').length) {
				$('#composite').attr('checked','checked');
			} else {
				$('#composite').removeAttr('checked');
			}
		});
		function updateSuperClasses() {
			var Composite = "/callimachus/Composite";
			var Viewable = "/callimachus/Viewable";
			var Editable = "/callimachus/Editable";
			var subClassOf = $('#subClassOf');
			if ($('#composite').is(':checked')) {
				if (!subClassOf.children('[about$="' + Composite + '"]').length) {
					subClassOf.append('<div about="' + Composite + '">Composite</div>');
				}
			} else {
				subClassOf.children('[about$="' + Composite + '"]').remove();
			}
			if ($('#view').children('[about]').length) {
				if (!subClassOf.children('[about$="' + Viewable + '"]').length) {
					subClassOf.append('<div about="' + Viewable + '">Viewable</div>');
				}
			} else {
				subClassOf.children('[about$="' + Viewable + '"]').remove();
			}
			if ($('#edit').children('[about]').length) {
				if (!subClassOf.children('[about$="' + Editable + '"]').length) {
					subClassOf.append('<div about="' + Editable + '">Editable</div>');
				}
			} else {
				subClassOf.children('[about$="' + Editable + '"]').remove();
			}
		}
		// ]]>
	</script>
</head>
<body about="?this">
	<h1 property="rdfs:label" />
	<ul class="aside">
		<li>Icon is used when looking up resources</li>
		<li>To add an icon, click the browse icon to open a file upload dialogue</li>
		<li>Use a super class to inherit or override page templates</li>
		<li>Templates are used for page or form structure on each operation</li>
	</ul>
	<form method="POST" action="" enctype="application/sparql-update" about="?this" typeof="owl:Class"
			onsubmit="updateSuperClasses()" data-redirect="./?view">
		<div class="hbox">
			<div>
				<label for="label">Label</label>
				<input id="label" value="{rdfs:label}" class="auto-expand" required="required" />
			</div>
			<div id="icon" rel="calli:icon" dropzone="link s:text/uri-list">
				<label>Icon <a href="/?view" title="Browse" class="ui-icon ui-icon-folder-open" onclick="return calli.selectFile(this)" /></label>
				<div about="?icon" typeof="foaf:Image">
					<span class="ui-state-highlight ui-corner-all">
						<img src="{?icon}" />
						<a href="{?icon}" title="Remove" class="ui-icon ui-icon-close" onclick="return calli.removeResource(this)" />
					</span>
				</div>
			</div>
		</div>
		<div>
			<label for="comment">Comment</label>
			<textarea id="comment" class="auto-expand">{rdfs:comment}</textarea>
		</div>
		<div class="hbox">
			<div id="subClassOf" rel="rdfs:subClassOf" dropzone="link s:text/uri-list">
				<label>Super <a href="/callimachus/Class" title="New" class="ui-icon ui-icon-newwin" onclick="return calli.createResource(this)" /></label>
				<div about="?subClassOf" typeof="owl:Class">
					<span class="ui-state-highlight ui-corner-all">
						{rdfs:label}
						<a href="{?subClassOf}" title="Remove" class="ui-icon ui-icon-close" onclick="return calli.removeResource(this)" />
					</span>
				</div>
			</div>
			<div id="equivalentClass" rel="owl:equivalentClass" dropzone="link s:text/uri-list">
				<label>Equivalent <a href="/callimachus/NamedGraph" title="New" class="ui-icon ui-icon-newwin" onclick="return calli.createResource(this)" /></label>
				<div about="?equivalentClass" typeof="owl:Class">
					<span class="ui-state-highlight ui-corner-all">
						{rdfs:label}
						<a href="{?equivalentClass}" title="Remove" class="ui-icon ui-icon-close" onclick="return calli.removeResource(this)" />
					</span>
				</div>
			</div>
			<div>
				<label for="composite">Nested resources</label>
				<label class="input"><input id="composite" type="checkbox" /> These resources contain other resources</label>
			</div>
		</div>
		<hr />
		<h2>Page Templates</h2>
		<div class="hbox">
			<div id="create" rel="calli:create" dropzone="link s:text/uri-list">
				<label>Create template <a href="/callimachus/Page?create#!/callimachus/pages/sample-create.xhtml" title="New" class="ui-icon ui-icon-newwin" onclick="return calli.createResource(this)" /></label>
				<div about="?create" typeof="calli:Page">
					<span class="ui-state-highlight ui-corner-all">
						{rdfs:label}
						<a href="{?create}" title="Remove" class="ui-icon ui-icon-close" onclick="return calli.removeResource(this)" />
					</span>
				</div>
			</div>
			<div id="view" rel="calli:view" dropzone="link s:text/uri-list">
				<label>View template <a href="/callimachus/Page?create#!/callimachus/pages/sample-view.xhtml" title="New" class="ui-icon ui-icon-newwin" onclick="return calli.createResource(this)" /></label>
				<div about="?view" typeof="calli:Page">
					<span class="ui-state-highlight ui-corner-all">
						{rdfs:label}
						<a href="{?view}" title="Remove" class="ui-icon ui-icon-close" onclick="return calli.removeResource(this)" />
					</span>
				</div>
			</div>
			<div id="edit" rel="calli:edit" dropzone="link s:text/uri-list">
				<label>Edit template <a href="/callimachus/Page?create#!/callimachus/pages/sample-edit.xhtml" title="New" class="ui-icon ui-icon-newwin" onclick="return calli.createResource(this)" /></label>
				<div about="?edit" typeof="calli:Page">
					<span class="ui-state-highlight ui-corner-all">
						{rdfs:label}
						<a href="{?edit}" title="Remove" class="ui-icon ui-icon-close" onclick="return calli.removeResource(this)" />
					</span>
				</div>
			</div>
		</div>
		<button id="save" type="submit">Save</button>
		<button id="cancel" type="button" onclick="location.replace('?view')">Cancel</button>
		<button id="delete" type="button" onclick="calli.deleteResource(form)">Delete</button>
	</form>
</body>
</html>
