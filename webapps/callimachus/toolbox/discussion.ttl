@prefix xsd:<http://www.w3.org/2001/XMLSchema#>.
@prefix rdf:<http://www.w3.org/1999/02/22-rdf-syntax-ns#>.
@prefix rdfs:<http://www.w3.org/2000/01/rdf-schema#>.
@prefix owl:<http://www.w3.org/2002/07/owl#>.
@prefix skos:<http://www.w3.org/2004/02/skos/core#>.
@prefix msg:<http://www.openrdf.org/rdf/2011/messaging#>.
@prefix calli:<http://callimachusproject.org/rdf/2009/framework#>.
@prefix prov:<http://www.w3.org/ns/prov#>.
@prefix :<#>.

<> a <../SchemaGraph>.

:GetDiscussion rdfs:subClassOf msg:Message;
    rdfs:subClassOf [owl:onProperty msg:target; owl:allValuesFrom <../Serviceable>];
    rdfs:subClassOf [owl:onProperty msg:object; owl:allValuesFrom <java:java.io.Reader>];
    calli:method "GET";
    calli:query "discussion";
    calli:type "text/html";
    calli:get <../pipelines/discussion.xpl?result&this=$0>.

skos:editorialNote a owl:AnnotationProperty.

:PostDiscussion rdfs:subClassOf msg:Message;
    rdfs:subClassOf [owl:onProperty msg:target; owl:allValuesFrom <../Serviceable>];
    rdfs:subClassOf [owl:onProperty msg:literal; owl:allValuesFrom xsd:string];
    calli:method "POST";
    calli:query "discussion";
    calli:realm </>;
    calli:expect "303-see-other";
    calli:type "text/uri-list";
    calli:script """
        var vf = this.objectConnection.valueFactory;
        this.skosEditorialNote.add(form.get('note')[0]);
        return this.resource + "?discussion";
    """.

:form a owl:ObjectProperty, owl:FunctionalProperty;
    rdfs:domain :PostDiscussion;
    rdfs:range <java:java.util.Map>;
    calli:type "application/x-www-form-urlencoded";.

:inputStream a owl:ObjectProperty; a owl:FunctionalProperty;
    rdfs:domain :TransformDiscussion;
    rdfs:range <java:java.io.InputStream>;
    calli:type "application/sparql-results+xml".

