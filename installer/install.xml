<?xml version="1.0" encoding="iso-8859-1" standalone="yes" ?>

<!-- 
    Callimachus FLOSS installation file.
    Uses IzPack (see http://izpack.org).
    
    To compile the installer JAR file:
    - Run 'ant installer' from the Callimachus root directory.
    - The installer JAR will be created in the dist directory.

    David Wood (david @ http://3roundstones.com)
    6 March 2012
-->

<installation version="1.0" xmlns:xi="http://www.w3.org/2001/XInclude">

	<xi:include href="../tmp/variables" />

    <property name="callimachus.PORT" value="8080" />
    <property name="callimachus.ORIGIN" value="http://localhost:8080" />
    <property name="callimachus.mail.transport.protocol" value="" />
    <property name="callimachus.mail.from" value="" />
    <property name="callimachus.mail.smtps.host" value="" />
    <property name="callimachus.mail.smtps.port" value="465" />
    <property name="callimachus.mail.smtps.auth" value="" />
    <property name="callimachus.mail.user" value="" />
    <property name="callimachus.mail.password" value="" />

    <!-- 
        The info section.
        The meaning of the tags should be natural ...
    -->
    <info>
        <appname>Callimachus</appname>
        <appversion><xi:include href="../tmp/version" parse="text" /></appversion>
        <authors>
            <author name="3 Round Stones Inc." email="info@3roundstones.com"/>
        </authors>
        <url>http://3roundstones.com/</url>
        <javaversion>1.6</javaversion>
        <requiresjdk>yes</requiresjdk>
        <writeinstallationinformation>no</writeinstallationinformation>
        <uninstaller write="no" />
    </info>

    <!-- 
        The gui preferences indication.
        Sets the installer window to 640x480. It will not be able to change the size.
    -->
    <guiprefs width="640" height="480" resizable="yes"/>

    <!-- 
        The locale section.
        Asks here to include the English and French langpacks.
    -->
    <locale>
        <langpack iso3="eng"/>
    </locale>

    <!-- 
        The resources section.
        The ids must be these ones if you want to use the LicencePanel and/or the InfoPanel.
    -->
    <resources>
        <res id="HTMLHelloPanel.hello" src="installer/hello.html"/>
        <res id="HTMLHelloPanel.3rs" src="installer/3rs.html"/>
        <res id="callimachus_logo" src="installer/images/callimachus_logo.png"/>
        <res id="callimachus_offerings" src="installer/images/callimachus_offerings.png"/>
        <res id="3roundstones_logo" src="installer/images/3roundstones_logo.png"/>
        <res id="LicencePanel.licence" src="LICENSE.txt"/>
        <res id="HTMLInfoPanel.readme" src="README.txt"/>
        <res id="HTMLInfoPanel.release_notes" src="RELEASE_NOTES.txt"/>
        <res id="ProcessPanel.Spec.xml" src="installer/ProcessPanel.Spec.xml"/>
        <res id="userInputSpec.xml" src="installer/userInputSpec.xml" />
        <res id="TargetPanel.dir.mac" src="installer/mac.dir" />
        <res id="TargetPanel.dir.macosx" src="installer/macosx.dir" />
        <res id="TargetPanel.dir.windows" src="installer/windows.dir" />
        <res id="TargetPanel.dir.unix" src="installer/unix.dir" />
    </resources>
    <jar src="dist/callimachus-configure.jar" stage="install"/>

    <!-- 
        The panels section.
        We indicate here which panels we want to use. The order will be respected.
    -->
    <panels>
        <panel classname="HTMLHelloPanel" id="hello"/>
        <panel classname="HTMLInfoPanel" id="readme"/>
        <panel classname="HTMLInfoPanel" id="release_notes"/>
        <panel classname="LicencePanel" id="license"/>
        <panel classname="TargetPanel"/>
        <panel classname="CallimachusConfigurationPanel"/>
        <panel classname="UserInputPanel"/> <!-- host config -->
        <panel classname="UserInputPanel"/> <!-- mail config -->
        <panel classname="UserInputPanel"/> <!-- repository config -->
        <panel classname="UserInputPanel"/> <!-- initial user config -->
        <panel classname="PacksPanel"/>
        <panel classname="InstallPanel"/>
        <!--
        <panel classname="ProcessPanel"/>
        -->
        <panel classname="CallimachusWriteConfigurationsPanel"/>
        <panel classname="HTMLHelloPanel" id="3rs"/>
        <panel classname="SimpleFinishPanel"/>
    </panels>

    <!-- 
        The packs section.
    -->
    <packs>
        <pack name="Base" required="yes">
            <description>The base files</description>
            <file src="README.txt" targetdir="$INSTALL_PATH"/>
            <file src="RELEASE_NOTES.txt" targetdir="$INSTALL_PATH"/>
            <file src="LICENSE.txt" targetdir="$INSTALL_PATH"/>
            <file src="LEGAL.txt" targetdir="$INSTALL_PATH"/>
            <file src="CONTRIBUTORS.txt" targetdir="$INSTALL_PATH"/>
            <file src="lib" targetdir="$INSTALL_PATH"/>
            <file src="etc" targetdir="$INSTALL_PATH"/>
            <file src="dist/callimachus-${Version}.jar" targetdir="$INSTALL_PATH/lib/"/>
            <file src="dist/callimachus.war" targetdir="$INSTALL_PATH/webapps/"/>
            <!-- The file will be parsed -->
            <!--
            <parsable targetfile="$INSTALL_PATH/README.txt"/>
            -->
        </pack>
        <pack name="Scripts" required="yes">
            <description>Scripts</description>
            <fileset dir="bin" targetdir="$INSTALL_PATH/bin" casesensitive="yes" os="unix">
              <include name="*.sh" />
              <include name="callimachus-linux-*" />
            </fileset>
            <fileset dir="bin" targetdir="$INSTALL_PATH/bin" casesensitive="yes" os="mac">
              <include name="callimachus-darwin" />
            </fileset>
            <fileset dir="bin" targetdir="$INSTALL_PATH/bin" casesensitive="yes" os="windows">
              <include name="*.bat" />
            </fileset>
            <file src="etc/logging.properties" targetdir="$INSTALL_PATH/etc"/>
        </pack>
        <pack name="Source" required="no" preselected="no">
            <description>Source Code</description>
            <file src="src" targetdir="$INSTALL_PATH"/>
        </pack>
    </packs>

</installation>
