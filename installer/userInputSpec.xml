<?xml version="1.0"?>
<userInput>
  <!-- Primary authority configuration -->
  <panel order="0">
    <field type="text" align="left" variable="callimachus.PRIMARY_ORIGIN">
      <description align="left" txt="$APP_NAME will be accessed at the Web address given in the Primary authority field.  Change the value to match your intended deployment."/>
      <spec txt="Primary authority:" size="25" set="${callimachus.PRIMARY_ORIGIN}"/>
      <validator class="com.izforge.izpack.util.RegularExpressionValidator" txt="The primary authority must start with 'http://' and must not contain a path.">
        <param name="pattern" value="^(https?://[a-zA-Z0-9:.-]+\s*)+$"/>
      </validator>
    </field>
    <field type="space"/>
    <field type="staticText" align="left" txt="The Primary authority will be the beginning of the URL that will usually appear in the address bar of the browser when connect to this server."/>
    <field type="staticText" align="left" txt="WARNING: A primary authority cannot be changed during or after an installation, ensure the host name entered is correct before continuing."/>
  </panel>
  <!-- Virtual hosts configuration -->
  <panel order="1">
    <field type="text" align="left" variable="callimachus.SECONDARY_ORIGIN">
      <description align="left" txt="Add other authorities that will resolve to this server."/>
      <spec txt="Secondary authority:" size="25" rows="3" set="${callimachus.SECONDARY_ORIGIN}"/>
      <validator class="com.izforge.izpack.util.RegularExpressionValidator" txt="Secondary authority must start with 'http://' and must not contain a path.">
        <param name="pattern" value="^(https?://[a-zA-Z0-9:.-]+\s*)*$"/>
      </validator>
    </field>
    <field type="space"/>
    <field type="space"/>
    <field type="space"/>
    <field type="space"/>
    <field type="text" align="left" variable="callimachus.OTHER_REALM">
      <description align="left" txt="List other top hierarchical resource URI spaces this server can create."/>
      <spec txt="Other Realm:" size="25" rows="3" set="${callimachus.OTHER_REALM}"/>
      <validator class="com.izforge.izpack.util.RegularExpressionValidator" txt="Realms must absolute hierarchical URIs with a path.">
        <param name="pattern" value="^([a-z]+://[a-zA-Z0-9:.-]+/\S*\s*)*$"/>
      </validator>
    </field>
    <field type="space"/>
    <field type="space"/>
    <field type="space"/>
    <field type="space"/>
    <field type="check" variable="callimachus.ALL_LOCAL">
      <description align="left" txt="Leave this box checked if you want $APP_NAME to provide navigational pages for all loaded RDF resources. Deselect this box if you want $APP_NAME to only serve resources with configured templates."/>
      <spec txt="Serve all RDF resources" true="true" false="false" set="${callimachus.ALL_LOCAL}"/>
    </field>
  </panel>
  <!-- Daemon configuration -->
  <panel order="2">
    <field type="text" align="left" variable="callimachus.DAEMON_USER">
      <description align="left" txt="$APP_NAME must run with reduce privileges."/>
      <spec txt="Daemon user:" size="25" set="${callimachus.DAEMON_USER}"/>
      <validator class="com.izforge.izpack.util.RegularExpressionValidator" txt="Daemon user is required.">
        <param name="pattern" value="^[a-z][-a-z0-9]*$"/>
      </validator>
    </field>
    <field type="text" align="left" variable="callimachus.DAEMON_GROUP">
      <spec txt="Daemon group:" size="25" set="${callimachus.DAEMON_GROUP}"/>
      <validator class="com.izforge.izpack.util.RegularExpressionValidator" txt="Daemon group is required.">
        <param name="pattern" value="^[a-z][-a-z0-9]*$"/>
      </validator>
    </field>
    <field type="check" variable="callimachus.daemon.autocreate">
      <spec txt="Create this system account now" true="true" false="false" set="false"/>
    </field>
  </panel>
  <!-- Port configuration -->
  <panel order="3">
    <field type="text" align="left" variable="callimachus.PORT">
      <description align="left" txt="$APP_NAME will bind to the port specified. Change the value to match your intended deployment."/>
      <spec txt="Port:" size="25" set="${callimachus.PORT}"/>
      <validator class="org.callimachusproject.installer.PortAvailabilityValidator" txt="Please choose a different numerical port, this one is already in use" />
    </field>
  </panel>
  <!-- Mail configuration -->
  <panel order="4">
    <field type="check" variable="callimachus.later.mail">
      <spec txt="Setup mail later" true="true" false="false" set="false"/>
    </field>
    <field type="combo" variable="callimachus.mail.transport.protocol">
      <spec txt="Email transport protocol:">
        <choice txt="SMTPS" value="smtps" set="${callimachus.mail.transport.protocol}"/>
        <choice txt="SMTP" value="smtp"/>
      </spec>
    </field>
    <field type="text" align="left" variable="callimachus.mail.from">
      <spec txt="Email from address:" size="25" set="${callimachus.mail.from}"/>
      <validator class="com.izforge.izpack.util.RegularExpressionValidator" txt="Your email from address does not appear to be valid.">
        <param name="pattern" value="[a-zA-Z0-9.!$%&amp;*+/=?^_{}~-]+@[a-zA-Z0-9.-]+"/>
      </validator>
    </field>
    <field type="text" align="left" variable="callimachus.mail.smtps.host">
      <spec txt="Email hostname:" size="25" set="${callimachus.mail.smtps.host}"/>
      <validator class="com.izforge.izpack.util.RegularExpressionValidator" txt="Your email hostname does not appear to be valid.">
        <param name="pattern" value="[a-zA-Z0-9.-]+"/>
      </validator>
    </field>
    <field type="text" align="left" variable="callimachus.mail.smtps.port">
      <spec txt="Email host port:" size="6" set="${callimachus.mail.smtps.port}"/>
      <validator class="com.izforge.izpack.util.RegularExpressionValidator" txt="Your port does not appear to be valid (it should be 1-5 digits).">
        <param name="pattern" value="[0-9]{1,5}"/>
      </validator>
    </field>
    <field type="combo" variable="callimachus.mail.smtps.auth">
      <spec txt="Authentication required:">
        <choice txt="yes" value="yes" set="${callimachus.mail.smtps.auth}"/>
        <choice txt="no" value="no"/>
      </spec>
    </field>
    <field type="text" align="left" variable="callimachus.mail.user">
      <spec txt="Auth username:" size="25" set="${callimachus.mail.user}"/>
    </field>
    <field type="password" align="left" variable="callimachus.mail.password">
      <spec>
        <pwd txt="Password:" size="25" set="${callimachus.mail.password}"/>
        <pwd txt="Retype Password:" size="25" set=""/>
      </spec>
      <validator class="com.izforge.izpack.util.PasswordEqualityValidator" txt="Both passwords must match."/>
    </field>
  </panel>
  <!-- Initial user configuration -->
  <panel order="5">
    <field type="staticText" align="left" txt="You will need an initial $APP_NAME user account to log into the $APP_NAME Web user interface. Complete all fields to create an admin user account. Choose a strong password if you are using a public server!"/>
    <field type="text" align="left" variable="callimachus.fullname">
      <spec txt="Full name:" size="25" set=""/>
      <validator class="com.izforge.izpack.util.RegularExpressionValidator" txt="Please use your full name">
        <param name="pattern" value="^\S+[\S ]*$"/>
      </validator>
    </field>
    <field type="text" align="left" variable="callimachus.email">
      <spec txt="E-mail:" size="25" set=""/>
      <validator class="com.izforge.izpack.util.RegularExpressionValidator" txt="Your email from address does not appear to be valid.">
        <param name="pattern" value="^[a-zA-Z0-9.!$%&amp;*+/=?^_{}~-]+@[a-zA-Z0-9.-]+"/>
      </validator>
    </field>
    <field type="text" align="left" variable="callimachus.username">
      <spec txt="Username:" size="25" set=""/>
      <validator class="com.izforge.izpack.util.RegularExpressionValidator" txt="Username must be in lowercase.">
        <param name="pattern" value="^[a-z][-a-z0-9]*$"/>
      </validator>
    </field>
    <field type="password" align="left" variable="callimachus.password">
      <spec>
        <pwd txt="Password:" size="25" set=""/>
      </spec>
      <validator class="com.izforge.izpack.util.RegularExpressionValidator" txt="Please enter a valid password">
        <param name="pattern" value="^\S{3,}$"/>
      </validator>
    </field>
  </panel>
  <!-- Change user password -->
  <panel order="6">
    <field type="staticText" align="left" txt="If you have forgotten your password you can reset it here or create a new account"/>
    <field type="text" align="left" variable="callimachus.username">
      <spec txt="Username:" size="25" set=""/>
      <validator class="com.izforge.izpack.util.RegularExpressionValidator" txt="Username must be in lowercase.">
        <param name="pattern" value="^$|^[a-z][-a-z0-9]*$"/>
      </validator>
    </field>
    <field type="password" align="left" variable="callimachus.password">
      <spec>
        <pwd txt="Password:" size="25" set=""/>
      </spec>
      <validator class="com.izforge.izpack.util.RegularExpressionValidator" txt="Please enter a valid password">
        <param name="pattern" value="^$|^\S{3,}$"/>
      </validator>
    </field>
  </panel>
  <!-- Start server/open browser configuration -->
  <panel order="7">
    <field type="check" variable="callimachus.startserver">
      <description align="left" txt="$APP_NAME may be started at this time."/>
      <spec txt="Start server" true="true" false="false" set="true"/>
    </field>
    <field type="check" variable="callimachus.openbrowser">
      <spec txt="Open welcome page in a Web brower?" true="true" false="false" set="true"/>
    </field>
    <field type="staticText" align="left" txt="$APP_NAME may take a few minutes to startup"/>
  </panel>
</userInput>
