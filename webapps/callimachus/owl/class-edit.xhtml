<?xml version="1.0" encoding="UTF-8" ?>
<?xml-stylesheet type="text/xsl" href="/layout/template.xsl"?>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
	xmlns:owl="http://www.w3.org/2002/07/owl#" xmlns:calli="http://callimachusproject.org/rdf/2009/framework#"
	xmlns:foaf="http://xmlns.com/foaf/0.1/">
<head>
	<title about="?this" property="rdfs:label" />
	<script>//<![CDATA[
		function updateSuperClasses() {
			var Creator = 'about="http://callimachusproject.org/rdf/2009/framework#Creator"';
			var Copyable = 'about="http://callimachusproject.org/rdf/2009/framework#Copyable"';
			var Viewable = 'about="http://callimachusproject.org/rdf/2009/framework#Viewable"';
			var Editable = 'about="http://callimachusproject.org/rdf/2009/framework#Editable"';
			var subClassOf = $('#subClassOf');
			if ($('#copy').children('[about]').length) {
				if (!subClassOf.children('[' + Copyable + ']').length) {
					subClassOf.append('<div ' + Copyable + '>Copyable</div>');
				}
			} else {
				subClassOf.children('[' + Copyable + ']').remove();
			}
			if ($('#view').children('[about]').length) {
				if (!subClassOf.children('[' + Viewable + ']').length) {
					subClassOf.append('<div ' + Viewable + '>Viewable</div>');
				}
			} else {
				subClassOf.children('[' + Viewable + ']').remove();
			}
			if ($('#edit').children('[about]').length) {
				if (!subClassOf.children('[' + Editable + ']').length) {
					subClassOf.append('<div ' + Editable + '>Editable</div>');
				}
			} else {
				subClassOf.children('[' + Editable + ']').remove();
			}
			if ($('#creates').children('[about]').length) {
				if (!subClassOf.children('[' + Creator + ']').length) {
					subClassOf.append('<div ' + Creator + '>Creator</div>');
				}
			} else {
				subClassOf.children('[' + Creator + ']').remove();
			}
		}
		jQuery(function($) {
			$('[data-prompt^=?]').each(function() {
				$(this).attr('data-prompt', $('#ontology').attr('about') + $(this).attr('data-prompt'));
			});
		});
		// ]]>
	</script>
</head>
<body about="?this">
	<ul class="aside">
		<li rel="rdfs:isDefinedBy"><!-- used by popups -->
			<span id="ontology" about="?isDefinedBy" typeof="owl:Ontology">
				<span property="rdfs:label"></span>
			</span>
		</li>
		<li>Icon is used when looking up resources</li>
		<li>To add an icon, click the chevron to open a file upload dialogue</li>
		<li>A superclass should be a common part of its subclasses</li>
		<li>Nested classes are resources that belong to a resource of this class</li>
		<li>A nested relationship links the super resource of this class with a resource of a nested class</li>
		<li>Templates are used for page or form structure for each operation</li>
	</ul>
	<h1 property="rdfs:label" />
	<form about="?this" typeof="owl:Class" action="" onsubmit="updateSuperClasses()">
		<div class="hbox">
			<div>
				<label for="label">Label</label>
				<div data-cardinality="1">
					<input id="label" property="rdfs:label" class="required auto-expand" />
				</div>
			</div>
			<div>
				<label for="icon">Icon</label>
				<div id="icon" rel="calli:icon" data-prompt="/callimachus/Image?create">
					<span about="?icon" typeof="foaf:Image" property="rdfs:label"/>
				</div>
			</div>
		</div>
		<label for="comment">Comment</label>
		<div data-cardinality="1">
			<textarea id="comment" class="auto-expand" property="rdfs:comment" />
		</div>
		<div class="hbox">
			<div>
				<label for="subClassOf">Super</label>
				<div id="subClassOf" rel="rdfs:subClassOf" data-prompt="?create=/callimachus/owl/Class">
					<div about="?subClassOf" typeof="owl:Class" property="rdfs:label" />
				</div>
			</div>
			<div>
				<label for="equivalentClass">Equivalent</label>
				<div id="equivalentClass" rel="owl:equivalentClass" data-prompt="about:blank">
					<div about="?equivalentClass" typeof="owl:Class" property="rdfs:label" />
				</div>
			</div>
			<div>
				<label for="subClass">Sub</label>
				<div id="subClass" rev="rdfs:subClassOf" data-prompt="?create=/callimachus/owl/Class">
					<div about="?subClass" typeof="owl:Class" property="rdfs:label" />
				</div>
			</div>
		</div>
		<hr />
		<h2>Nested Classes</h2>
		<div class="hbox">
			<div>
				<label for="creates">Nested</label>
				<div id="creates" rel="calli:creates" data-prompt="?create=/callimachus/owl/Class">
					<div about="?creates" typeof="owl:Class" property="rdfs:label" />
				</div>
			</div>
			<div>
				<label for="createRel">Nested relationship</label>
				<div id="createRel" rel="calli:createRel" data-prompt="?create=/callimachus/owl/ObjectProperty">
					<div about="?createRel" typeof="owl:ObjectProperty" property="rdfs:label" />
				</div>
			</div>
			<div>
				<label for="createRev">Nested reverse relationship</label>
				<div id="createRev" rel="calli:createRev" data-prompt="?create=/callimachus/owl/ObjectProperty">
					<div about="?createRev" typeof="owl:ObjectProperty" property="rdfs:label" />
				</div>
			</div>
		</div>
		<hr />
		<h2>Page Templates</h2>
		<div class="hbox">
			<div>
				<label for="create">Create template</label>
				<div id="create" rel="calli:create" data-prompt="/callimachus/owl/sample-create.xhtml?copy">
					<span about="?create" typeof="calli:Page" property="rdfs:label" />
				</div>
			</div>
			<div>
				<label for="copy">Copy template</label>
				<div id="copy" rel="calli:copy" data-prompt="/callimachus/owl/sample-create.xhtml?copy">
					<span about="?copy" typeof="calli:Page" property="rdfs:label" />
				</div>
			</div>
			<div>
				<label for="view">View template</label>
				<div id="view" rel="calli:view" data-prompt="/callimachus/owl/sample-view.xhtml?copy">
					<span about="?view" typeof="calli:Page" property="rdfs:label" />
				</div>
			</div>
			<div>
				<label for="edit">Edit template</label>
				<div id="edit" rel="calli:edit" data-prompt="/callimachus/owl/sample-edit.xhtml?copy">
					<span about="?edit" typeof="calli:Page" property="rdfs:label" />
				</div>
			</div>
		</div>
		<button id="submit" type="submit">Save</button>
		<button id="cancel" type="button" onclick="location.replace('?view')">Cancel</button>
		<button id="delete" type="button" onclick="calli.deleteResource(form)">Delete</button>
	</form>
</body>
</html>
