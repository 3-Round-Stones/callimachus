<?xml version="1.0" encoding="UTF-8" ?>
<?xml-stylesheet type="text/xsl" href="/layout/template.xsl"?>
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
	xmlns:calli="http://callimachusproject.org/rdf/2009/framework#">
<head>
	<title about="?this">{rdfs:label}</title>
	<script>// <![CDATA[
		jQuery(function($){
			$('#iframe')[0].src = '/callimachus/editor/editor.html#sparql!' + location.pathname;
			$('#form').submit(function(event) {
				event.preventDefault();
				$(window).bind('message', function(event) {
					if (event.originalEvent.source == $('#iframe')[0].contentWindow) {
						var msg = event.originalEvent.data;
						if (msg == 'OK\n\nPOST save') {
							location.replace('?view');
						}
					}
				});
				$('#iframe')[0].contentWindow.postMessage('POST save', '*');
				return false;
			});
		});
	// ]]>
	</script>
</head>
<body>
	<form id="form" action="">
		<iframe id="iframe" class="auto-expand" src="/callimachus/editor/editor.html"> </iframe>
        <button type="submit">Save</button>
		<button type="button" onclick="location.replace('?view')">Cancel</button>
		<button type="button" onclick="calli.deleteResource(form)">Delete</button>
	</form>
</body>
</html>

