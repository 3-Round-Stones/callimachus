@prefix xsd:<http://www.w3.org/2001/XMLSchema#>.
@prefix rdf:<http://www.w3.org/1999/02/22-rdf-syntax-ns#>.
@prefix rdfs:<http://www.w3.org/2000/01/rdf-schema#>.
@prefix owl:<http://www.w3.org/2002/07/owl#>.
@prefix obj:<http://www.openrdf.org/rdf/2009/object#>.
@prefix http:<http://www.openrdf.org/rdf/2009/httpobject#>.
@prefix calli:<http://callimachusproject.org/rdf/2009/framework#>.
@prefix :<#>.

<Group> rdfs:subClassOf calli:Group, calli:Viewable;
	rdfs:subClassOf calli:Copyable, calli:Editable;
	calli:icon <favicon.png>;
	calli:withNamespace <../../group/>;
	calli:view <view.xhtml>;
	calli:copy <copy.xhtml>;
	calli:edit <edit.xhtml>.

# Adds new groups to the set of authenticating groups.
# Called on group create
:post-group-copy owl:intersectionOf (calli:post-copy
		[owl:onProperty obj:target; owl:allValuesFrom <Group>]);
	obj:imports </accounts>;
	obj:script """
		var copy = proceed();
		accounts.calliAuthenticates.add(copy);
		return copy;
	""".

# Removes old groups from the set of authenticating groups.
# Called on group delete
:post-group-delete owl:intersectionOf (calli:delete
		[owl:onProperty obj:target; owl:allValuesFrom <Group>]);
	obj:imports </accounts>;
	obj:script """
		accounts.calliAuthenticates.remove(this);
		proceed();
	""".

