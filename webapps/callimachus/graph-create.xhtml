<?xml version="1.0" encoding="UTF-8" ?>
<?xml-stylesheet type="text/xsl" href="/layout/template.xsl"?>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<title>RDF Graph</title>
		<script>
			jQuery(function($){
				var submitted = 0;
				$(':input[type=file]').live('change', function() {
					var form = $('.graph-form:last');
					if (form.find(':input').val()) {
						var clone = form.clone();
						clone.find(':input').val('');
						form.children('div').remove();
						form.after(clone);
					}
				});
				var advance = function() {
					$('.graph-form').find('button').attr('disabled', 'disabled');
					var next = $($('.graph-form').get(submitted++));
					if (next.find(':input').val()) {
						next.submit();
						next.find(':input').attr('disabled', 'disabled');
					} else {
						submitted--;
						$('.graph-form').find('button').removeAttr('disabled');
					}
					return false;
				};
				$('button[type=submit]').live('click', advance);
				$('iframe').load(advance);
			});
		</script>
	</head>
	<body>
		<ul class="aside">
			<li>Upload an RDF file into the database as a Named Graph</li>
			<li>The system should be idle before attempting to upload a graph</li>
			<li>Files can be formatted as <a href="http://www.w3.org/TR/rdf-syntax-grammar/">RDF/XML</a> or <a href="http://www.w3.org/TeamSubmission/turtle/">Turtle</a> and can optionally be in ZIP or GZIP compression</li>
		</ul>
		<h1>RDF Graph</h1>
		<form class="graph-form" action="/callimachus/Graph?create" method="POST" enctype="multipart/form-data" target="iframe">
			<input type="file" name="graph" />
			<div class="authenticated">
				<button type="submit">Upload Graph</button>
				<button type="button" onclick="history.back()">Cancel</button>
			</div>
		</form>
		<iframe id="iframe" name="iframe" src="about:blank" style="width:40em;height:20em;border:none"> </iframe>
	</body>
</html>
