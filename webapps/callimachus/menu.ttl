@prefix xsd:<http://www.w3.org/2001/XMLSchema#>.
@prefix rdf:<http://www.w3.org/1999/02/22-rdf-syntax-ns#>.
@prefix rdfs:<http://www.w3.org/2000/01/rdf-schema#>.
@prefix owl:<http://www.w3.org/2002/07/owl#>.
@prefix skos:<http://www.w3.org/2004/02/skos/core#>.
@prefix obj:<http://www.openrdf.org/rdf/2009/object#>.
@prefix http:<http://www.openrdf.org/rdf/2009/httpobject#>.
@prefix calli:<http://callimachusproject.org/rdf/2009/framework#>.
@prefix audit:<http://www.openrdf.org/rdf/2009/auditing#>.
@prefix :<#>.

<Menu> rdfs:subClassOf calli:Menu, calli:Viewable, calli:Editable;
	calli:view <menu.xhtml>;
	calli:edit <menu-edit.xhtml>.

<menu> a <Menu>; calli:maintainer </group/admin>.

</callimachus/menu/sampleapps> a <Menu>.

:GetMenuItems rdfs:subClassOf obj:Message;
	rdfs:subClassOf [owl:onProperty obj:target;
		owl:allValuesFrom <Menu>];
	rdfs:subClassOf [owl:onProperty obj:functionalObjectResponse;
		owl:allValuesFrom obj:TupleResult];
	http:method "GET";
	http:operation "evaluate";
	http:type "application/sparql-results+xml";
	obj:sparql """
		SELECT DISTINCT ?heading ?label ?link
		WHERE {
			{
				$this calli:item ?item
			} UNION {
				$this calli:item [rdfs:label ?heading; calli:item ?item]
			}
			?item rdfs:label ?label.
			OPTIONAL {
				?item calli:position ?position
			}
			OPTIONAL {
				?item calli:link ?link
			}
		}
		ORDER BY ?position ?label
	""".

:PostEditMenu owl:intersectionOf (</callimachus/operations/edit.ttl#PostEdit>
		[owl:onProperty obj:target; owl:allValuesFrom <Menu>]);
	obj:imports <java:org.openrdf.http.object.HTTPObjectServer>;
	obj:script "HTTPObjectServer.resetAllCache(); return proceed();".

